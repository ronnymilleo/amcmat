function [y1] = amcFcn(x1)
%AMCFCN neural network simulation function.
%
% Auto-generated by MATLAB, 07-Nov-2019 00:28:16.
% 
% [y1] = amcFcn(x1) takes these arguments:
%   x = 10xQ matrix, input #1
% and returns:
%   y = 6xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.868456943326732;1.76242864253927;0.0102092723459299;0.01683113758978;2.27653534992756;0.116452245215777;0.0149621159899022;0.0734470207539696;0.122321595032851;-0.6686093527384];
x1_step1.gain = [11.2561143097564;12.7646374240355;13.5627724215118;8.93534419008587;0.735968099829619;0.00731822520076624;3.2611585665808;4.85301063692845;2.98333008554646;1.0862629092567];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.6470264411215205236;1.2035960356696648876;1.2732321947290363706;-1.2969551027451260428;1.1071553700209897375;-0.94636517370649231307;-0.74624658087952433494;-0.56376243388154667624;-0.94187173157309900251;-1.4856472707990229232;0.36514548813991487552;0.79383148011762649787;-3.8684988191988591844;-0.43964745647113362415;-0.82465172201206482505;0.53532225539648370383;2.0936788269053221434;-1.441493672151333838;-1.6885338119970749737;3.5424774226644921704];
IW1_1 = [0.47806030981997077456 -0.12562799874591421001 4.4212931113347435641 0.61084978442605708526 0.3134672197035854313 0.44138267579316886602 1.3727684059995945987 0.023494786579628612611 -0.054746979223089305144 1.5181963211102076361;-0.67703565512757635236 1.3208693894098804122 -0.46997745673243185305 -0.8838269579462404435 -0.96130163591692741054 0.040756827535347137093 0.033126783952868298078 -0.60473891596115647573 -0.7563284122525668618 0.82941844766401950917;-1.1021740365683467822 -0.50452562030006753435 -0.23093323595670375847 -0.71536409382387611267 -1.7342317674731140276 0.84765353437240531509 -0.73537510009003825839 0.44413797882762368063 -0.63390169605753643456 -0.42142346225244958768;0.5330498631798111786 -0.6040481342546708543 -2.6465083095995511897 2.1405021543466542511 -1.4174616232676768846 -0.68727825010826770757 -0.21982657361242161076 0.81055546754393659192 1.6532971824921727233 1.4442511817466785473;-2.7888239301499537781 0.16405840919011435708 -2.6159627537096947769 -0.45700489532759092093 0.20571866235157543201 1.0605601764644578822 1.5787021698841043893 -0.38567334252233947955 3.1730785824593708 2.2189222998719806412;1.1055111487583755281 -0.21095673513674798039 5.8726333328171209658 -5.5602237453222880248 0.31649502958639436079 -1.1744329358557288323 0.47963898340917704433 -0.66480881059563323721 -0.33216104935566342915 0.57814524872668937583;0.65656925049228020974 -0.16303734108837547589 -0.16149759608014024881 0.10974680380060870821 0.93325363315557552379 0.86066323362353192028 -0.56129412705622516722 -0.7078115921938616939 0.11413362976914455393 -0.43797621516013773846;-0.9782389750937746653 -0.75199717330354753919 0.90392349508925307067 1.468623669731407233 0.94211911768790446153 1.114089001107930299 -1.475920783942149983 -0.09372559291048754293 -1.9253182034955276247 0.44420062669850551851;0.67557393241061547418 0.22013850178571564564 1.307705358724361222 1.3608520758653410709 1.2573971196489490687 -0.92381281497850020745 3.5727751416913036131 1.8485187144413761651 2.8511435409370218252 2.1850026779365032681;-0.93886719074705793364 -0.056384854786853524922 -0.55056590235957214574 3.291644554958428337 0.28405901662919075257 -0.14131490928723197675 0.21068266084145412242 -0.83573672604935811403 -1.3888478130888635143 -0.87740832336058727225;-1.7761447656013478191 0.46650213123079159461 2.323460792057292057 -2.1780496889924383375 1.3594380396331076089 0.47338580181762673904 2.0945566205114238834 -0.56021192742762926375 1.001517993781554372 0.90840309152397957781;1.5102067842497168826 0.74543102737351607523 0.34990518611551779671 2.43333668372774925 -0.90158301802369100741 2.696009779997369904 0.018286690934732716118 -0.43168039213100267704 0.69827541991869113147 -1.1900705501149291266;0.51610617014073445485 0.081858925719236391716 -2.6227989812834842098 4.4045750063874944402 1.121721658966880586 -2.8880124499891750567 2.5836525532287217821 -0.25079811860275669222 0.93061947063066718933 0.95744712129378595211;0.29868974167460154989 0.69707341992422988675 -1.0020836650832194437 -1.437424602955563735 0.7450190066791004817 -3.8333841525383189897 0.68215306659094798736 -1.0345080822415331223 -0.10314431123830987425 0.1168162516044356225;-0.4991411347184837588 0.76351381665220330319 2.3679432742997956751 0.95851203003219032084 0.50253362124287503931 1.3459913966438747934 -2.6520227113088221671 -0.16274915453917779273 -1.4981905543955738036 -0.68849220415143874696;-0.85596950582942976649 2.3861943760887118771 -0.13362105969477591771 -0.071043482022122059205 -1.094507142888640594 -0.062527619049099342208 0.088670577754443064 1.089984609455824982 -0.11646136672517594379 -0.14431980565552321449;2.0566373843162164547 0.45219153611761592204 0.9394445330269129979 1.5351254913845624461 0.80686337782862249668 0.42311931151339060575 0.6151411629692824512 0.71072437367845731071 0.44733063666017691684 -1.7987866205560263388;-0.78825271563528220842 -0.43804555306781517432 -0.0025668910828040027682 0.22936487304524075248 0.63541058255165550062 0.21018252779108986816 1.7306741462556127775 2.0979122630282529549 0.39221600290923502863 -0.30076245474324964091;-1.7392422801236129271 1.1051786713482334434 -0.2739790892216856788 -0.032988745289899243374 -0.72621962310698795484 -0.1752553841044856564 0.33495747788062169015 -1.1682146049897821349 -0.71366890304587315974 0.20756352516100945449;1.7081956646268150468 0.84162724214050566029 -3.4993699537032512126 3.1343755563614057458 1.8900775361434576372 1.2833293001604915151 -1.2684553225648727004 -0.26965592457222525846 -1.3959157426435326865 -0.16516425701330619824];

% Layer 2
b2 = [-1.4973484017054301543;-2.0187206442250280602;1.5768601814433635955;-1.3174297403982291321;-0.75759460333377515173;0.036650167149468920735;-0.14005908288220805802;0.7802746793818524651;-0.73246667582196645085;0.50677278025549121754;0.55023897256637099851;-0.3222167941590312612;1.3685703487492959507;0.59922514734464094044;0.87145422758472901315;-1.14106570609716651;1.4647423837006732228;-1.2288261102106823319;-1.667230560730848854;-1.7207074507453596901];
LW2_1 = [2.1375412062285206183 0.21109842486960420094 0.50668936874174674845 -0.022128970144756735655 -1.5080397883252001368 1.2702261590158032689 0.2305512364806668324 -0.71753070632306770182 -0.44844604769769241814 -0.54630923997368785461 0.1197564640160193733 0.066386575348946597064 0.21387983560510634429 0.48708879520468090218 -0.1031191692853126729 0.44122563395380676177 0.58960302512686213472 -0.8215765991677849156 -0.1918204170068683323 -0.092754384707237277907;2.5102683985289662161 -0.10305248510890548108 0.7645580922121334444 -0.31842982795941709995 -0.46545010436195310977 0.095247857512498410038 0.16838789446420510121 0.25409097372247019253 1.9000264311128951533 1.422102426065100067 0.23305723680870413239 1.8386031506821256531 0.71932587909674738924 -0.64204071348315105983 -0.025670431837704642264 0.3964260066461121057 -0.85896083418866264747 -1.2021067852743427817 -0.094798286193507053099 -0.56250319538490467508;0.50113071371673800769 -0.35275632005802504132 0.30650346499301867054 -1.0378722135043747521 0.13354146634765806656 1.231196561800147915 0.19714511762708319953 -0.44090346780223466094 -0.31848560257307001464 0.13562458018800674364 0.27846570995291325401 0.47942462028820015396 0.42398695652304707604 -0.32162648989189090987 0.89939272809550352417 0.51933196304854911673 0.091256545213060202837 -1.2937149869574908756 -0.32385244063114859703 0.24385016263308395557;0.18852663753007284364 -0.033235519736306270988 -0.53736850510578493267 -0.49792923620486229108 0.40830091761516257298 0.27579486543249454034 0.28033937850006040993 0.176519807472310164 -0.4925028003587180736 0.1520930585296959292 -0.16691956956934608791 0.19769865031147029755 0.077661033010929428344 -0.14893324528132528828 0.54202854272643052891 -0.75760955104616911626 0.14612509023981481993 0.65887066721783715817 -0.034838718766473916744 -0.37986503361238799226;0.058678435791678536237 0.22596533501740304062 -0.43324664050670980142 0.45582402861378484848 -1.2178407870696241755 -1.6631874879522192678 -0.31884294019667924758 1.3153370131792536668 -0.28737827462453058303 0.91001769058504811127 -0.48524463131342870925 0.13849286764075263712 0.85490396949474323218 -0.70964258599811957939 0.43119094917241634901 -0.46946240132453725957 0.14425448419433042901 0.34318612214729982135 0.99362098749357730121 0.68717095259221516734;-2.4006062603777293951 -0.2793120304220764738 1.1085110259816193246 1.4752625905523422123 1.3236711688043887314 -3.9577260959477578162 -0.58674333015917323753 -0.54530401625299940171 -0.5679878944355996051 1.3579849477610930197 -1.7514191711424498266 0.3117607160919775855 0.46421894775402089417 0.52434743713161047207 -1.7147218294044992426 -1.2997577709662069267 0.19704182965311359266 -1.7910742698247210658 0.72684548626643774583 3.4755693260590092564;1.4143984311778463603 1.2196264186788126072 1.0011829860705094841 -1.0061543541953095193 -3.489845524845726743 0.70107061794343006333 0.069835042897264248962 1.716329395076575004 1.369155886672635658 1.4916772327362677331 -0.68074919532314959181 -0.54242276077547901814 -1.1030659428033633418 0.89420817421917886403 1.6878106754750430429 0.51918491157510471279 -1.0727008567154336927 -0.71099537068474916168 0.28291547216695506206 -2.4111525040638257522;0.092545165440505589016 -0.029139637414430010626 0.083845955111257350345 1.0404154012650816963 -0.48117190530071957122 -0.31263199362796151304 -0.099675403617238700349 -0.44173388378598260617 0.12600345492547038173 0.077162815016523708667 -1.7628166169592818235 -1.3936500773939359821 1.2911976655466668173 1.5823951203050006242 0.25908019018436184711 0.45777016355217264865 -1.5873805872078843304 -0.80765484886283256394 0.68300008773220677316 -0.054325611348875868511;-1.3144497921938891327 0.17268502157471368741 -0.59020128138019400943 -0.66042280131359643036 2.5392325416141563466 -0.57295530790404491928 -0.55755824491183259006 1.048470647273516354 1.2750910365970882232 -0.042771022916055403962 1.399047024557763752 0.82770854396035853373 -0.40009534920596173668 -1.2660400793523245433 -0.70025430011590650281 0.24325815426645111539 0.25955321999663560906 -1.2022342017944911419 0.42490703149776976044 0.60717235696633198305;1.0112586367920493036 -0.28577113897132516707 -0.016917219136585323613 0.27049760574195597096 -0.74265725107328561805 -1.8523337303630904582 -0.12951124869807290052 0.64449399223601799847 -0.66338055363329706537 0.41899564046144616158 -1.0278641398885499658 0.77618999569689028917 0.069349497171217466818 -0.55293834505522065914 1.3842075061963277083 -0.54178032182054181032 0.58041848878879587215 -0.54921272629515327512 0.22713523142706362745 0.10100673906080236131;0.41697645775983538385 0.50352285020994025366 0.28450105157411420542 1.0212493208951933799 0.76502978518055975155 -0.3191907153270284736 -0.61547356787556650737 -1.6600825321685304115 0.17224236866081774067 -0.28950093427402756596 -0.552684080418711976 -1.5451961390278772246 4.4637550997883685966 2.1844218902472882782 -1.2085625958494685683 0.55676679949498597555 -0.47738720346572910413 -0.126314882911000681 -0.25849356411107116127 -2.1478302783073290882;-0.19996617022610191361 -0.051537815308886354704 -0.39611487170461406881 -0.54357109978115225601 -1.02571191739412515 -1.939830427482573727 0.32718769643641687495 1.128481233764565772 -1.0881912887137104029 1.9751345004279472484 -0.17176691716694231227 -1.5025334525732563229 0.01068462989345272604 1.8225454486068162208 1.1264727261271181291 0.53254095532754386344 0.40016868298643221147 1.7350518797731286913 -0.26480373721715716462 -0.18892353167243275402;2.4150471434847369245 0.018241258313864680551 0.44683195673830655714 1.1503633889051232408 -0.64905321246715663719 -2.8282349271948694636 -0.81238018658247790338 0.12308225965369377908 -0.56232394408729058366 0.58034627648174952341 -1.0781003780835909378 1.1136910306679417282 3.631809830877144929 -0.69237331686735903435 0.10298069798658493479 -0.26423325133581737623 2.2913656282250913776 -0.37840354454669927753 -1.0475218982692378056 1.5592269268703617957;1.3861378673066351297 0.69287343297907144635 0.17580282731188257017 0.017359903351554673706 1.234155485203964453 -0.71689955759832513227 -0.56566299912744821832 0.2611387767490829237 -0.89934744629258178694 0.53884798828428337458 0.11608165324615095371 0.14531042484614772881 1.3582818096748765502 -1.0287470039857113946 0.38338386971377452772 -0.21474337773354690295 -0.12001780415229298948 -0.40096426327089651487 -0.51162275276240554156 -0.61657452812583313229;1.5627461996852811676 -0.80859806354374974546 0.18974882421325864335 -2.4249384991221032415 -1.6634203315451840943 1.5719647638503637666 -0.75414649739715911014 0.8142787435144317465 0.27623560806084612729 1.2643982930152022348 1.8028528567550119455 0.098210855914310418724 0.23390694677234152854 1.1622625103364592203 -0.13587515184540718827 0.17538625439325436495 -0.85452868273431925594 0.0061682849034321975482 1.4354364030633228744 -2.0544053470392307226;1.1946784097173674954 0.60149296253990047756 0.47306796457259031596 -2.4104123025801973412 -1.5267936327903401938 4.8281454441881077599 0.055212334417773061002 0.039992935767457896135 -3.3431566061564770287 -0.90596936189815968632 2.1615652657099326817 -1.9713150244030130942 -3.4982630927000362142 1.4099392315770276074 1.0965142352417036609 -0.07529203068119441622 -0.57745672459053964953 -0.057662648236074864894 -0.18033362312565093255 -2.8385663905427733766;0.26143315526870003485 0.013445129315282432214 0.15143162506135238177 0.0062899301860004485504 -0.36283351494306143037 0.70068099268312988848 -0.18771536777261216278 0.26278538052863986696 0.31900065907842212187 -0.031314106941094037306 0.0059630797876722351977 -0.34052646525317192827 -1.2971701326794695674 -0.37595977997283236416 0.95344361267112376357 0.30158900161996782252 0.068961838557855911769 -1.3308928791582175233 0.17876204559543235062 0.41012749771119144659;0.0016649785840155031762 -0.19458400631227570909 -0.36281683231002992418 -0.096211149549728397501 -0.10699704124587446075 0.53415348668422879541 -0.32449722938773267744 0.14699819790821805343 -0.32729968755884408793 -0.50746958077345805105 0.024086382586663419164 0.52943883244246536801 0.26099842486936614128 -0.21316361608855097232 -0.46855395860849413658 0.45548479732781638196 0.27760330644170339021 0.85250839281344725773 0.43304855230924788057 -0.32297270081961354515;-0.7215193083606609159 -0.03400593065278544741 -0.97058594415108989661 0.93080849342472382624 0.61593581666259267227 0.19649810996381705808 0.16452314715588567395 -0.40582857094929480901 0.4146543464413476876 -0.23173326348295647525 0.60469294741775692081 -0.31067398099785759058 0.8263117288362202828 1.1485953031934712509 -0.86751530830683287743 -0.35549002825328057664 0.84113875938618898331 -0.40806756953379147435 -1.4288433649054350649 -0.12632600753935413485;0.55823078296245232099 -0.35064502992798268766 0.48249379847822237988 0.31605008901616959971 1.1657783474875769159 0.24529766702964223013 -0.42297870209757743032 1.0214722810361622773 0.14070495170380142858 0.70947650611593993109 0.65569806554429443946 0.079245150645413126034 0.23228744815338756013 0.54389185991415645027 0.42779119326324910322 -0.58248678348271198946 0.044087532120644819245 0.80422920194295866025 -0.036392184340810804222 0.26528683115474782639];

% Layer 3
b3 = [1.5875766011543313017;1.3755766652842078557;-1.0340682913733321158;-1.2485397597891629839;1.2837644130325682745;-0.96888272195347324711;-0.97310616013106321365;-1.1586778807157847027;-0.16778316386018901629;-0.21198934785972375905;-1.0908810675571758431;-0.00054809068951072314069;-0.58262232869239161115;0.85796374426717825212;-1.1089106189123181245;-0.55340201358521001751;-0.94326923245600191592;-1.0519464718893196675;1.6070075105353001099;1.6474677728758342354];
LW3_2 = [-0.76605568806710588881 -0.023496027611500651389 0.0050617424798059980351 0.19846572453261482338 0.15030532666973189793 -0.49638810824557738632 0.81199195393104994789 -0.25394962072543070253 -0.039419927764589357544 -0.28496946526376004671 0.38412426297388124752 -0.34438856602844641897 -0.52563147394977738358 0.82680828128990890846 1.2230253200990395257 -0.98053522850786545284 0.23352127719566609376 -0.60690520663782376865 -0.414226406343750575 0.89554179940409261995;-0.63167518229154218101 -0.57580907588131191588 -0.011827726787151980961 -0.13539046190528439273 0.61596385322681179719 -0.46357529778597850179 -0.3738444842031258819 0.098207187574191098789 0.84883437269615169551 0.64262599336843417852 0.080441040665747462479 0.56124354940112675116 0.26286155336216487921 0.17192708913313198282 0.63210856317017527495 0.45456571276530122194 -0.21080351354952106546 -0.5573888271699777297 1.0477401108079396064 0.67184340810414111544;1.0754549914199358351 -0.88080368998098723665 0.2212373996763456474 0.20498799720623717135 -0.095886693013420301601 -2.8907016840144188485 1.3406112910047840447 -1.6585809078679767392 -0.29960447767247416762 -0.88194274197763422585 0.2369819936100659441 0.82778217833079703603 -1.4098937405131788392 -0.34654718069101536626 2.5419885037940623818 3.9613804741079796656 1.065618648146044567 -0.56834307850212972824 0.20226817371544450475 -0.14931875892077817181;0.63356079821645294725 -1.4234843118378153193 0.37451897859817068204 0.55879992360010177777 -0.8938100854780659521 -0.48605404000759899752 -0.24120682038033336436 -1.2396572778299901341 -0.11903709009602012059 -0.85565657750051882235 0.39751472251930614066 0.1913164974976805377 1.8519684069531032744 -0.072095618588500526291 1.5147472647151238867 1.0618259421681428556 0.30551764812923409842 -0.23882375278364237348 0.58494291647042495619 -0.54653719730313909952;-0.17678692548132382556 2.5922873853214003503 0.27082438956962279208 -0.036526856668337541467 -0.23857055196090443117 0.041716423617454596873 -0.5148988269739137591 -0.7645589302071305049 1.1712418340029864261 0.17557888111106628726 0.41195109142547764458 -2.3609088547414134318 -0.5706420659774616988 -0.36000607018822666783 2.4778410875077199194 1.2923662976947210002 1.7561874233724983352 -0.18282556972447164267 -0.33678383307511799982 0.27290499093316994417;1.1088890238240316499 0.53900282828462153795 0.051735447772177277359 0.46872032117567635767 -0.38416083373353387964 -1.5159359896926307698 0.2661229900187273012 -1.8505464811677638792 -0.49260126606489929024 -2.6823247562886782802 0.65016419833988714494 -1.6327798442815899538 -0.32470960697692852204 0.42628790306444197533 0.4955434062410909446 0.59500149161509774398 -0.13968902903695301632 -0.41421759832657889522 0.022362480967572678781 0.040180312485803081068;0.63817646750645140585 0.26764649658981071179 -1.1720481643245161951 -0.034415167506617216908 0.040546535572606123843 -0.21083930547423887503 -0.73140818236732152435 0.23844920656400608872 0.40809031366159109755 -0.38603164742943435472 0.27362243455325796493 0.38725233859000990355 -0.23707959402708636554 0.15495691835264016611 -0.37485480210650196087 0.085288800882768633915 -1.0793216146531943167 0.29908362320297826598 0.44992825633915245476 0.52255950700959130639;0.96062167290666478081 -0.16253552838999238417 -0.20125209958829878842 0.92990247941520209896 -0.81207805479908912183 -0.48419123578055073276 2.8979222559348549737 -0.73864954024680906652 -0.48778586350100772151 -0.50090671485583215805 0.68361176406211743295 -0.96850725926865099957 -2.518112792904492192 -0.15219645677311752219 -2.1630689607424606891 0.35097700925201463784 -0.37490316050378441615 0.071047318380031351803 -1.8146758016865467411 -0.45000738965709485839;-1.4857424280444557763 -0.6850022347152380231 -0.24662222831362037856 0.88916976796407143357 0.11467218799761250136 3.4343628569093684888 -1.8378042908179741399 1.7938925417069959689 1.9788611762377170677 1.0374163381006673568 -2.8955088608485053392 -0.82515844160996776324 1.6817925991233537708 -0.56562754116911895252 -3.0746843806736516846 -0.96330003895245253087 -0.44498513040090648119 0.41091119234812295558 0.28711696352149668199 0.25023457531100207207;-0.87722552735993297723 -0.27909866301257529875 -0.55128745581889626592 0.69850205949714327947 0.19476798586280708037 2.5240237932621534256 -2.8410069620522424572 0.7194690584588824267 0.11325050281349344217 0.44839160147488094088 1.2873211164322591049 0.77719039340968776308 3.4953301076427338856 0.83415760403614980234 -0.73658128211754880788 1.2392791927957329534 -0.8173779801798070066 -0.19299969906077446558 0.41172984606063944835 -1.128886761338178113;-1.1667019601177754939 1.1446955395915787701 -0.17743716328298242413 1.0996741562836642725 0.29359937239691774602 1.4111244771367648099 -0.52881000050624804576 -2.9055604961952838927 1.2981451938802335278 0.88423673266020519357 -4.3866774398423000747 0.17656943201740607496 0.26419385188794924924 0.10669057542337055666 3.4941422049700010533 -0.87139532771158878521 -1.1692198313903194862 1.3629594210977478141 -1.7070063046588586086 0.065081044100876686564;0.084370006783921133731 0.61210464613265647138 -0.85137303326975666273 0.82984386276166599572 0.56221128092777095109 0.0083042456317700876628 -0.98022753828932873699 -0.14265167049929702858 0.33743141016214117656 -0.19652211790285950554 -0.27033175296200995241 0.1434574562096060657 0.2646457924456688815 -0.51142992774711570902 -0.34301688682032455135 -0.36825472194791342151 -0.95065052261158677904 0.54034988344781464953 0.53528036042737847655 0.40779062354253803324;-0.38651207796493813884 -1.2711893784805798902 0.39959874353988955598 0.34703319878462673964 2.0779343399271930082 -3.0456272753944753084 -0.15625524563234874376 0.063981649302976228988 1.3400954127548245776 0.77512865378242634673 0.060339607310334171519 -0.23858974702586382977 0.93909984660926593136 -0.54062228215537133647 0.6099549740020747679 1.5013061421157465336 0.27496065621120896472 0.13239681102364880827 0.60319253353442103815 -1.0384970655601744038;0.75265967463659166903 1.7694359105039596525 0.30249240481816291881 -0.65389042824579535207 -0.6706458226016691615 -1.0869072808920809958 0.18747532323075993821 -0.033095588834792868949 -0.11703797692482710568 1.6919262901729215098 0.3120406837925794874 1.1410826327465388719 0.30488873811724520602 -0.84854838128244824969 0.47813855204552246914 2.5221642985020871208 0.17448037936530924608 -0.096732118129643579474 -0.39448776416966285785 0.30793680728104227962;0.087450314138132770325 -1.8175839917949436764 1.0961064621618370474 0.76987375862387807945 0.030971599158891971459 -0.59613292526955941053 -1.1020258423952331572 -1.2824327449521872868 0.56975073172844237224 -0.47363216709199629229 -0.81346495356357817474 -1.6386213834604121953 0.64069914254386473029 -1.3946158549775520274 -1.3390432943845491653 -2.5285463836769803692 -0.52570446870555564978 0.36055087975805472089 2.0380025281150349059 -0.15942676446966530523;0.40047307872203757872 -0.91296287195804159964 0.93918392117135440778 0.055903802770270315248 0.99931509472119273152 -3.6777065605809888815 -1.3010273526371678443 -0.35743357984775386837 -0.77582898614158324335 -1.4184032592731976585 -0.84636702875055891404 -0.0079491981327212968278 1.3238317334107156942 1.4778396987149235997 1.0431533705340767515 -0.68893594452445161558 1.3229490287363032675 -0.81489453394849364898 0.4132321473276931445 -0.076173796342369162748;-0.082875473852162234722 -0.46085456650991718508 1.1257732689094159806 -0.30142909843085397004 -0.015038926703365994991 -0.52529227016623314395 -0.27586853118023729747 -0.99771828689133912338 -0.074913400219148759684 0.24000669536948543437 -0.33355930937572181305 0.21199233924747146185 2.1220683280380079339 -1.4052631742028365291 2.1481489857365323459 -0.28475239365709087425 0.82875887597284769726 -0.65756325183163077952 -0.83844756615048732229 -1.8246093254842106202;-0.20885050019224576934 -1.6273072102797343508 -0.871306082940557447 -0.69276304167793312239 0.12334700738987484925 1.0146637328195162731 0.63968485112029693784 0.64437643117174980834 -1.7722895856144034177 0.015968351242684447611 0.51899526635651593853 0.67499732181928140395 0.70083011432820652153 1.0072358158663741179 0.18831364895758717637 -0.75060149521152497165 -1.9151579572245382987 0.20477342595569919537 -1.5889612063802152075 0.9256901808954334232;0.45758603836448036306 3.7069407772204701068 0.5848561190800077858 0.2329000232726361197 -0.71061882713606627782 -0.014493249297165828118 1.2048497006358738215 0.38353686055456825965 0.39081813556838601587 -1.4863895394555897145 0.35209490639949492241 -1.872162678653891188 -2.8314243096003854916 -0.12103442602537192729 -0.066084901532994289042 -2.4886738667608607756 0.27137222759973234076 -0.61009430476291193202 0.66844956835977997756 0.15896709807631140277;0.38815156459119692922 0.14641284485749342381 0.77167777498510337075 0.45831819778698484891 0.15656239400842150711 0.19836638380678001115 -0.048259135311233450349 -0.2792010614664645618 0.34408004842676465085 0.48892685249304129735 0.17544309408448863219 0.3938222562559335338 -0.51525088535023688685 -0.027291342033145746249 0.16550968496585399814 -0.47022449140991151584 1.0802506100691375845 -0.5383434612467364877 -0.60085561153838973336 -0.41603085696587660536];

% Layer 4
b4 = [0.16034898301043304381;0.44581021596417630404;-0.42812806036563044731;0.16042813603839750636;-0.68223830515652383877;0.8824247194098956415];
LW4_3 = [-0.35234506899598388996 2.0651018466361148462 1.0779618198498481796 -3.7843364566310557784 2.9268864836530918971 -0.89208464563746681097 -2.0098800680101778227 -4.5242901796242707135 5.323571381802175928 5.4849306501493462207 4.5533965313530142538 -2.1820474468643298316 -0.36673556933720258266 0.24184570106082567409 5.8627674455276181931 4.7691258985455124986 0.94710030430323799422 -2.8398787436961825392 1.5237812421516871986 1.4618381140045273447;-1.9551832208443451488 -0.35627669879412277032 -5.0116564019197040736 -2.235361538227372602 -2.5351240644051986628 -0.81748924615650198078 -0.53446892299495463163 0.51015977256599009948 -1.8074735295192099205 0.18292171426690750913 -1.1641973938383773923 -0.063555411711843784461 0.49965923647322607604 2.6641669473607527685 -2.3158950559157558402 -1.2821087560752726375 1.8130101343106459488 0.8784325516907866005 -1.955740576898753913 -0.19043978628760005467;1.121593499967423746 -0.99497688191520650136 -5.0458516074847805655 -2.2683112488887853253 0.27563631574633323806 -1.5994664172479038378 -0.38014018139748423364 3.0652209675945956135 -1.6720162329680414715 0.27950265416040592781 -1.2887216036241981865 -0.096748165876803224328 0.48198191603904627645 -3.1265941659902920513 -3.5220163434823987814 -1.3855047131582531872 -1.5218045250281857506 -0.68155394866152940736 1.9481941628691497037 0.015116692639911329804;-0.97543013681919665814 -1.3133390816430392523 6.7904147918938857487 5.4110155312712704401 -0.16537884935517177531 4.8594397504575281843 -0.28974565032936655529 0.7801868493628500989 -1.5220396398688309514 -1.8084687968771564481 -0.9392418586669093461 -0.35644623869729968879 -2.9436243409768483303 0.63814887454164315184 -1.2553239735401302557 -0.31377396194896650661 0.38920423953098431946 0.49768387828650861859 2.518419375985114339 -0.30959573964823733361;0.9416684194411056863 1.1095386335949188883 1.6053086255884883027 1.8707607028503274726 -0.85247978062044993397 -2.7790481117039842474 0.36085559342395162608 -1.0342134540936469556 -1.9013928594911844172 -3.4377832531659575643 0.3518863493698178857 -0.41450652741251303723 3.5258444242540227798 1.1076615027120668699 0.21922644830480966793 -0.71489884112001866878 0.42563891111559559732 -0.45189030976266880701 -5.5037180949646531403 -0.69378205179255569846;-0.65624102708129961048 0.2083081380721450715 -0.63541385696448426934 1.1408431567563357412 -0.50110212346468152589 0.20030895254958733243 2.3762410728947727101 -1.0818011167617260782 -0.11590570026103752532 1.4492742591636267324 0.20138262231474451935 1.5687316091149374753 -1.4754569481857207069 -1.3301740554816643414 1.5199864650406138544 -0.22125929572230593201 -1.4336462010409580792 1.3973856976871141811 -0.51094761405466415649 -1.2797897972153167157];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = softmax_apply(repmat(b4,1,Q) + LW4_3*a3);

% Output 1
y1 = a4;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
  if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
  else
    a = iSoftmaxApplyCPU(n);
  end
end
function a = iSoftmaxApplyCPU(n)
  nmax = max(n,[],1);
  n = bsxfun(@minus,n,nmax);
  numerator = exp(n);
  denominator = sum(numerator,1); 
  denominator(denominator == 0) = 1;
  a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
  nmax = max(n,[],1);
  numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
  denominator = sum(numerator,1);
  a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
  numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
  if (denominator == 0)
    a = numerator;
  else
    a = numerator ./ denominator;
  end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end
