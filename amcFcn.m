function [y1] = amcFcn(x1)
%AMCFCN neural network simulation function.
%
% Auto-generated by MATLAB, 01-Nov-2019 18:52:37.
% 
% [y1] = amcFcn(x1) takes these arguments:
%   x = 10xQ matrix, input #1
% and returns:
%   y = 6xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [1083.6402517852;1083.6402517852;0.00128307039088469;0.00211090694402943;2.28443667865219;0.119215518053289;0.0150836481591312;0.073752287242494;0.122817378613902;-0.66227419859476];
x1_step1.gain = [0.000140816841669154;0.000140816841669154;108.663749507543;71.4781216988472;0.700463498831407;0.00761746609786287;3.30602124264396;4.92374424747306;3.00885252906813;1.09377886325072];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.1907788094376843269;-1.7033863726188755994;-1.7172904397059809423;-0.77741772195969438553;0.35914792958217123253;-0.18212931677541241426;0.46988018104591433577;-0.17423170571005888729;1.2901358437511047939;0.47854036747737099811;-0.72745043837231992967;0.30205370221559524335;1.0339706162748598661;-0.15526418269756395163;1.2410506865260046983;1.7252514627072876863;-1.4100312267480243911;-1.6498393887756106491];
IW1_1 = [-0.48882565537755057195 0.95062993879778678874 0.38401239337223558312 -1.0556714627325411993 0.44672356772663990299 1.0095002405213497898 1.061120532862203758 1.2786496929823167878 1.7039665144155806686 -0.076352458491567312682;0.68316055645098539006 -0.44330121176666592575 1.1036352858204370175 -0.47167748436271955681 -0.6563392394184400791 -0.35464340183098430614 0.26130403573969795961 0.92440296301240043597 -0.51354321438615480044 -0.11579821572329100643;0.38373821720444811767 -0.89000039625079052641 -0.32620478735812719062 1.1422312175141380308 -0.32964726182721210135 -0.69417265106845882361 -0.63553954813790036749 0.17579183141145152125 0.8871989387507728253 0.84812197895576879603;-0.1630206289517871221 -1.2400145119739822697 0.058847533085615050252 -0.23123912554320938395 0.71804854216597024941 0.35307429468737205891 0.17088097917637809497 0.10911043872343491323 -1.4071666438230117091 -0.91474437380202222592;1.2012165677875505931 0.5052240222807466985 -0.58485771140653164402 0.99531402375601452093 -1.5473736232050387951 1.0652376872879070202 -1.6684225390293940805 -1.1424129061494399107 -2.605977941386972585 -1.2838452780445785972;-1.1099593718362308348 -1.4997797860699177974 -1.3164813022541597132 0.65430069917982891514 0.90160674142583563384 0.23063610437468407 3.0790092593413538324 1.2777502927936539301 1.3261329087706965613 1.7010597797497768457;1.3768999033183784153 1.9084421952067260886 -0.19350298302340818157 1.7574634821836792042 -1.3758362964641464021 1.0326709098448387802 1.8924156988877955943 0.3824204925739574934 0.58102543339451706572 1.4314622115107902278;1.0223933879254361035 0.72762641959609619668 0.48968534220133830281 0.24295955308403013873 0.4378875609294885507 -0.45328041457665391167 0.78137880122913294656 1.3561225703416031063 0.053712466363576918948 1.4270418664056572222;-1.2608838500909280711 0.29551385857851225625 -0.30750415911044426398 -2.9869655693384791206 -0.70485554319200094398 -0.0012322698110044630511 1.8444363296234547178 1.0694106566110461731 0.58816736869858576853 1.5485871806597439893;-1.9973308206204358761 -1.0060579019055211347 -1.8147638400700005779 1.3845814288726576713 -0.69344766691600001618 0.19101331793805959025 -0.18300848140106143469 -0.57224569078618736651 -0.14981340973434728592 -0.54687941294193831432;2.3376575592143549187 1.8287652815753119295 1.79352974621774508 -1.0018300011007843509 0.86314188661012136716 -0.34116817507093127881 0.27789769293669075445 0.24647398503740017284 0.55336919683561436312 0.32513412314441236806;-1.7842643782397706875 -2.1592685588246713912 -1.181315314638127445 0.62762350702149904969 -0.59108875232160240643 0.15684643757973004696 -1.1025668280662794807 0.23965544169500460625 -0.83683815141648731917 -0.39825737477399880682;1.0451139320091151763 1.3730335581531487588 1.7952498082246277633 -0.70198607954633662764 -0.08705305971719325131 2.1709005654033952659 -0.31869592271706970177 -0.4131923041572661548 -0.1095185712473643741 -0.97639580849119345096;-1.4914655087817141332 -0.55870835208860369914 0.10754163178971577752 -1.6840051402038289652 -1.4800237104611670969 0.40400778083627064685 -1.1817952907685236319 -0.22402521988528611985 0.11344524770864329588 0.1124177045208849951;0.32253594455940942654 -1.4690168077248910716 -2.0062964618164191855 1.3316347483319774803 0.8803626596839958518 0.15217002743642832341 -0.54148625348180046135 0.84287316993532956921 -0.46057295976016371375 -0.16828617787815633444;0.13127133232075413605 0.6702039999231937939 -0.27062902461612659 -1.3999783585234684136 -1.1385671064741629266 -0.37236005351720852241 -0.57278923002215931248 -0.90516478750229212302 -0.57436344748718715092 -0.092460372883395758326;-1.1827780372564680178 0.50255154222937359343 0.25041199312832995716 -0.46266768356372001136 -1.1000437975565500182 0.35693493917521640357 0.40627885805939562003 0.32320780600249426895 0.67075351601553412362 -1.047012769164636925;-0.38722459455412494567 -0.35613833188592602941 0.39783524798232983155 0.93399245684962417524 -0.96497433733276893886 1.2610056271584089149 -0.019736674731169061986 0.48732571032665644717 -0.714074001353533383 -0.24725108670031487046];

% Layer 2
b2 = [1.6422160155364713408;0.60906326347320149939;1.6505681707373365263;-1.0420657805542639096;-0.10601961829184092245;-0.33946242260960035608;-0.54507127500071872461;-0.20056908913339374645;-0.65286404448182044913;1.2493146047348864247;1.3792187078596287453;-1.4210731346491307647];
LW2_1 = [-0.65944297165425813656 0.17686061165262043082 0.3306462348805315199 -0.80724445391965216068 0.096026480102067948708 -0.32551814977676146734 0.094247553796833832829 0.55817676382678360625 -0.3248750357034736469 0.21815811792694270177 -0.36584625470069581654 0.29530926363303050541 0.2485379041316906068 0.002987761145194553665 -0.13202672155359629347 -0.35363237613887427147 -0.47971926717827018116 -0.47643551043425763636;-0.49687191288964338565 1.2928418050979431086 0.37031233055361578721 0.44996198340574050656 0.93962274643631815696 0.68870669678100437938 0.034156360446449492152 0.28188204492387608502 -0.077798226010229593053 0.35128667358551379785 -0.42505454815494198018 -0.12815495871088616875 0.36865583770976012579 0.063737295860308351703 0.06199372848127265162 -1.4926665219647961003 0.67791810658451934213 0.37606970575111392519;-0.14224010445689400095 -0.15915533993929872891 0.022954414042299999682 -0.12328647320949312483 -0.27244752387902249069 0.63307095376466604453 -0.067959662745699658815 -0.50310952802634578696 0.33860519403345107348 2.0844389616417542399 -1.90414247078100618 1.4895273768485226551 -2.0755821303770862762 0.1872649731732934919 1.4297555942153974406 0.36029052484112250587 -0.99126628450164444573 -0.066055907914401551517;0.55320250347255717216 -0.0056574524682298319572 -0.16138520236219250359 -0.55788779986279435352 0.57262541888199502971 1.6418613500141032713 2.1302017437753604234 0.33856370675670138803 1.4652763879928145663 1.3925062604342690609 -2.0619836595148028913 1.4191893855728965335 -0.20162228046358590672 -0.45624058107514298133 0.73472081368981967398 -0.73418806262968872023 1.650075570503662048 1.2626389487396907363;-0.49516548644990932004 0.72020532934488534771 0.45145057485343648151 0.94630319033972876142 -2.0582058519463686252 -2.7227727965535444277 -1.8285807690520945457 0.055337498812141325266 0.29203920972045993576 0.043630801653011551389 0.70094725880923469674 -0.77476948199767103898 -1.6240566821392052876 -0.16617201687930222009 -0.92227615208904090149 -0.40021139421574958295 -0.13350796111857149429 -0.12315141224292362743;0.12861543694194071952 0.23834806888655149515 0.60944025608526375404 0.67410399475394078284 -0.85402009500856279622 -0.46647989480825902131 -0.022574040607599397956 0.074487148780693429595 -0.32913641049442665665 -0.75334336483420272224 0.99481337521741652896 -1.5351547707826034284 -0.88979597655863618133 -1.1176346247514221677 -0.64087485632620755371 0.52613939974173207226 -0.16614699407015601218 0.20019186031322472319;-0.62016920216723414594 0.89656416163627761229 -0.036547993244675940072 0.27716483538053460212 0.17452709790206230589 0.39274171987266559558 -0.099105653044686936592 -0.19861688227743398705 0.76708571097951505635 -1.5813422525595624002 1.7662766918877916833 -0.98429178745518430826 1.1855325797201545779 0.43606338289073387493 -0.57053381139268033451 0.70812213411345825698 1.0030396702794464048 -0.22773650780591950249;-1.5602116583770759828 -0.5869136769120502084 0.42520123640850793212 -0.1989677187721417273 1.9698298857902480918 1.3798386431607214675 0.88058114574472334812 1.065761585631474162 -2.4122363300880502734 0.65816650149610878007 -0.47456885023132522328 0.096505810779639364383 -1.5042308742938668153 -2.2837230225547791029 1.6498883065090119704 -1.4705802071662190667 0.029521339651595958353 -0.34357493517087084323;-1.4014055093287813847 0.043691711520087384013 1.2679426336315779977 0.56813601048015349715 0.85722691900049741154 1.7078784046653872064 -0.21330233258790071149 -1.2452098472568176035 -2.3298888475271488652 0.40845293232280377449 -0.77120273533144678701 1.0366242327791292954 0.39640337801510933113 0.1934505367391697872 1.0220690389459401448 0.79095365243084392315 0.54335070328355017377 0.28022296299238391715;0.33643353457677155349 -0.047569506170876199591 0.10756997271684025363 -0.21778372759272326964 -0.49711373913447620687 -0.1219088805983786078 0.18435137874454210483 -0.85718240914979593192 -0.51745646494387054215 -0.018815898621738668534 0.37764343398410915587 1.0017088532174989179 -0.39077736080756869663 -0.014630298078334344133 -0.014591708910516927589 1.0473805813089520633 -0.28388085388651440599 -0.6447973753540188202;-0.1413825294313012515 -0.29501308575458129457 -0.62053434566360565761 -0.5578183299226495695 0.30955321220680853678 -1.0919866373943678539 -0.53481488050054015737 -0.2475153283222092937 0.13448118595512245643 0.36785639472854142484 0.4732656324175751883 -0.16672050324493911666 -0.047083755592349459118 0.025065098032691739138 0.37880212054823891865 1.0870730687524570168 -0.2951137670252728662 0.24055995909892316509;-0.24939799841434551197 0.15584090987169324505 0.47048837101958163043 0.28028452820111698918 -0.11456614406561117792 -0.41621188632293554255 -0.024916889572959920185 0.70875310337657204673 -0.012626095864197226307 0.56527502405575014155 -0.45255496597616506893 0.074128090105610430771 0.17205372875922242404 -0.76878063040898747538 -0.49730338828426590148 0.63535203492527292379 0.15460397120566368723 0.38264577358985724098];

% Layer 3
b3 = [0.49059086071694596454;1.1804720500682495121;0.56774440973406570254;0.39279161985651761535;-0.28762460711401521829;-1.307157556923047137];
LW3_2 = [-1.1977902637767607885 0.82790075404346452626 4.7192227864421001371 -1.9517444890807402746 1.2814905508608169793 2.3551901361011502445 -3.1858635829727437461 -0.26112530702016872874 -1.232422136899530507 -1.2341862577072029161 0.18030161438282224506 1.9752583332236037794;-0.42033804706176491894 1.1709832306350256292 0.46753169334102656629 2.4414503197836463499 -0.97793758926791563013 -0.36225539682544555253 -1.7937128218145352854 1.5421419171164116868 -1.5216520138346738555 -0.44215410765894691547 0.35612202989055702362 -0.27631484129250710735;-0.92521960220066956637 -0.90205741513342707627 -0.3950314008862205184 -1.9492239600201517469 -0.70855381685908203071 -1.4056947882207004863 -0.34714052729980632295 2.5919495961087521962 4.3517984153143691728 0.74977386617517649547 0.33781577812462443289 -0.12929320318046044758;0.69739264234611686444 -1.2594159649262250955 -0.18979735587435386801 -0.51320305974049262865 0.11060467420126748883 0.43672007083314995368 0.84483565142554328808 -1.1671850612663301483 -0.42343874221661786938 0.95152423460453749993 0.7197232824566817122 0.56108580896790671844;0.35688006816861583825 -0.18522386075056601618 -2.3140277488860356847 1.9609532426206419675 1.0544047039733377424 -0.39056244476873297478 -1.2785892706541674979 -2.9781427722536486513 0.56818337416902309212 0.94395165116414214701 1.8333489828328790594 -0.0031225753636794930344;-0.19129251852499534747 0.65826119831857476949 4.0715860807042290048 0.77138792512823217695 3.4526319565072958184 -1.6538687796369169192 -0.30577210746983307654 1.0879100067811420249 -0.4176345734935001941 -0.97413928380145720087 -1.1831300717261989952 0.016451357851167577179];

% Layer 4
b4 = [0.72735288805350239993;0.11249584160300511726;0.19937014307540731894;-1.2118919815504021198;1.0064136654330133602;-0.087221829625921926121];
LW4_3 = [5.6949208514070059906 -1.2257623049008505856 3.1985906237184660306 1.1711883510276333009 1.4919009339252620183 2.5537763742610368745;4.0260944696949190202 2.3587079059537878756 -4.2351294986698224676 2.7492760473668029775 2.3728370936860101459 0.61709365745517230639;-2.4375993286747572597 4.8957983767311024081 3.0121808311898359278 0.53347884495492114976 -2.2315849357241597239 -4.4432466811250916905;-4.1045871748970652604 -4.0886447315093397137 -3.5172748454437976484 -0.49731038392746618193 2.0613192016803756346 0.44645436253068421228;-2.8566155083178665919 -3.4076321702372416311 2.3785373688745323761 1.8116554989105289053 -3.4321995617538614276 -0.6785521681250072934;0.57863286371184707857 1.2437553130365297527 -1.4714211987054273134 -3.9542976407699059749 -2.0074862860628210903 1.7386845437408358084];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = softmax_apply(repmat(b4,1,Q) + LW4_3*a3);

% Output 1
y1 = a4;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
  if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
  else
    a = iSoftmaxApplyCPU(n);
  end
end
function a = iSoftmaxApplyCPU(n)
  nmax = max(n,[],1);
  n = bsxfun(@minus,n,nmax);
  numerator = exp(n);
  denominator = sum(numerator,1); 
  denominator(denominator == 0) = 1;
  a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
  nmax = max(n,[],1);
  numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
  denominator = sum(numerator,1);
  a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
  numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
  if (denominator == 0)
    a = numerator;
  else
    a = numerator ./ denominator;
  end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end
