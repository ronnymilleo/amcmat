function [y1] = amcFcn(x1)
%AMCFCN neural network simulation function.
%
% Auto-generated by MATLAB, 10-Dec-2019 17:23:20.
% 
% [y1] = amcFcn(x1) takes these arguments:
%   x = 10xQ matrix, input #1
% and returns:
%   y = 6xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.274526152362792;1.56671220177929;0.0280795379131745;0.0715461141459729;2.26514906010483;0.114287693691464;0.0149585004180746;0.0734077840463468;0.122306814729235;0.0316227766016838];
x1_step1.gain = [1.54265999782981;3.35642258573481;9.0109985216376;6.80509214874668;0.567910936974886;0.00724759440308936;3.23386548261087;4.77031594446256;2.96884306109059;0.063308862065433];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.9788733123230879407;-1.7227365577713977807;-1.4133159295334913885;1.1589976304129565587;0.7780326076882803088;-0.90967352958300551347;-0.93258286358548081463;-0.23603986698754858553;0.3135412084009280842;-0.39650516173106714612;-0.42053828748632221535;-0.27912615091206532947;-0.4380526419205109101;0.80843033766144301033;-0.88116533120807971624;-0.96319203732218061642;-1.3994763015508817627;-1.2998572777778474308;1.6196723345139867334;1.8277833961140768082];
IW1_1 = [0.51606105414637881701 -0.098563679393430705944 0.7782819514927866722 0.64235537856163882342 0.62575117144105729672 0.75587257516089401133 -0.79896837286423738611 0.090415232547212107117 -0.28490289430081539024 -0.57620530867317276691;0.52459659731799657134 -0.39966943326678155968 0.20018219904434439438 0.4579856510680928583 0.77329006604933792079 -1.3593126142033646886 0.12839000975126660387 -0.17318616640939896167 -0.43247431554414594856 -0.56339569320439397693;0.21086197109868765054 -0.092709835711186266982 1.1122046119899069438 0.040176171320868307724 -0.3010142959131427709 0.30818849244963358869 -0.68486717328755730705 0.93698814785415496242 -0.69279994307390224684 -0.63420479740443280736;-0.71625789504887293901 0.65161600068973124511 0.10205589607947526676 0.2815117366555690559 -0.16860429383093664124 0.15125531338340325593 0.16923468411401834666 0.50767511089104266908 -0.8839902128279943927 -1.2610168819874900681;-0.28021819421131505257 1.2062102300180381764 -0.14524771780452475078 0.53993450192073144667 -0.12792232368662961872 -0.37775989970896706183 -1.1488974765371338105 -0.25821191788206510065 -1.0392030959064644247 0.25633154852858341943;0.55318138166855912452 0.56236014179678350811 -0.40581518643091507581 0.11492962022573116609 0.68329705377198257654 0.16156966585114374002 0.70587904828107550514 0.88020414727650142517 -0.15100523156481776565 1.0494410939524305704;0.42893237248476012713 0.18019947652481793643 -0.59028845647043015621 -1.0526489043813505031 0.4148309378540914194 -0.70842500955813658692 0.45291705683125932369 -0.18078531878779427466 -0.75449992702954749024 0.80782744970566033871;1.112802146638101064 0.47161474091322269642 0.4812308779170806905 0.13880869456220434888 -0.10571653119590884717 0.32521799547747642922 1.5439174003961031456 0.5174036140466969913 -0.15817744278886453069 -0.68762185468581304981;-1.1614520082061647877 -0.75167469647948392808 -0.84954143273505411393 -0.45716920795296556168 0.40284681329832050523 0.27590803287700860214 0.99023287880801991179 0.42878561839896672803 -0.084525372375281432324 -0.16848231181899067654;0.37727998063154266628 -0.60498973615790785363 0.66011085371468780636 1.0257991981361713751 0.89914492745767682358 -0.72471247974973884709 0.050783616153860636211 -0.30349347650402147547 -0.74760722936902290758 0.10557160510325183655;-0.14731975681029760294 -0.63267943929213044107 -0.96559339037502500691 0.41213326599334210165 0.7759127030362799049 -1.0445083039371980682 -0.44250485795557703561 -0.60241581158019563702 -0.067656869343153666629 0.23249905051012614843;-0.10539428323689882527 -0.94107518216716679049 -0.051437785414837768061 0.41349699758921854009 0.59107661053289461961 -0.71135061751506512007 -0.88321345698669895263 0.32008768895752293115 0.62518087692622037466 -0.64210282210081459642;-0.72353841030215282348 -0.35587637412684958171 0.61770182029993114803 0.33033923790391017672 -0.7995095218878415233 -0.93631317296016514096 0.03258334522659241117 0.68425923424963908115 -0.41683428631466606928 -0.67196823770150226895;1.0869451673868824049 -0.72082157795986145921 -0.31214981980492478852 -0.49959009949570970521 -0.43655228710822036042 -0.32025330033739751734 0.21225143801622939344 -0.39159208022235780788 0.93303847634448489057 -0.24263643419043859351;-0.41455889032066506328 -0.99264464259941476154 0.10468437647876387142 -0.053772548496327142453 0.14917722745516617811 0.75675517330377051195 0.47775480458623997837 -0.7867079110123476049 -0.86465083975734469135 -0.64374221767503725378;-0.71307146982255609213 0.17032690730685368097 0.71465917380906074374 0.16665506719545070125 -0.15288335510785172611 0.052212171681795913059 -1.1135474998734531393 -0.16739585511870813672 -0.28873088453440787227 -1.3122124007177420335;-0.27173560118243678119 -0.65784232773692685736 0.60523819429043057561 -0.64079805236930442724 -0.70548525023566843739 0.19348452104188615386 0.32098559227441186836 -0.30879895544530600038 -0.83560700570497215001 0.70847106157833950046;-0.29519423691240814778 -1.0118074124682510107 1.0419087638351001157 0.061200511694873380164 -0.75813622222768761727 0.85472724364471841518 0.05007558010961721956 -0.17326401239319058623 -0.58877932054877646362 -0.31736619373780117215;0.093236091783156602175 0.22934315271705940642 -0.51585221488444510385 0.40406087471889723384 0.64814713348763930423 -0.70766721881024519103 -0.54134672736780686808 0.61751311002983844123 -0.87803900452247107822 0.88950128318025389884;0.12715853390937931211 0.71363490333529200349 -0.52836631981167692107 -0.044193567453071895546 -0.91351095813961524783 0.82969375129832656501 0.8323765059981467207 -0.21064090000417662329 -0.62821232486944522666 0.50558531712744381181];

% Layer 2
b2 = [1.5183577656858602278;-1.4598624740822154777;-1.2226610561138222533;-0.93390822976982268422;-0.85036105444794218844;0.66880753951700355753;-0.60903268391489939759;0.32614480707994225606;0.10140060509152629131;0.19454514786766100021;0.27285229659900878119;-0.3923918700672140436;-0.58106042709260874446;0.58254900210072990685;1.028302684114901222;1.0879458019644909772;1.4916635261683810487;-1.5387326671748704499];
LW2_1 = [-0.44584579532141527247 0.33133158491464570483 0.60999069028982266794 0.080987964387777985897 -0.72660380464372387177 0.62337313404188032795 -0.037861089021470638316 -0.1483037509686853106 0.51945434926467615178 0.17651753063603561889 -0.66496938934647709107 -0.089982770538401410376 0.47482942381140930133 -0.39419579821542710674 0.31989618218572618558 -0.20498248298323124006 0.30282853771065987303 0.11969372553157653361 0.3165103497061282356 -0.50244996963015153835;0.2882099740124067222 -0.048652543191908481646 0.64805547997941670424 0.18379490855386362846 0.25235970557519243895 -0.43013455607777834055 0.14223710676059431179 0.48309736857524215869 0.43912847958959394523 0.16356750887853116483 0.025809452370514844588 -0.10040821211444368732 -0.45379704516541835568 -0.18636469260887417176 -0.68775012250381406531 0.52578595150865670149 -0.25274118964418934574 -0.079668957215698874008 -0.50202433196321383235 -0.157026310118941137;0.26607102352028649817 0.61770303312251029215 0.33110253692578017759 -0.49686090661937187818 0.26327871778247402546 -0.30009422065847801697 -0.28415747573520933056 0.37187832370571072271 -0.39412559825729986951 0.82824566509656927238 0.61524096260055050056 -0.15269082231741484823 -0.086398695085052532039 0.14057622978407494085 0.25725498364579446609 -0.053560285835866021376 -0.37875036244975096578 -0.51781928482848593731 0.29761321148307801066 0.34218451811157413189;0.092402422332860306708 -0.75695624666896044186 0.23360435881427052407 0.081499114087717733357 0.77285104888772537812 -0.36831995874241685307 -0.10984744801135611081 0.09947763686787655657 -0.048732396210578565743 -0.64099701014865784199 0.11348762321611384485 -0.3753622295256161534 0.36291865718959842591 0.075335693654320967649 -0.46949536750960080278 -0.12375109089204945623 -0.29391926736201506865 -0.62117757126008543711 0.1942233844605084081 0.19336614415678782253;0.050105632146624841383 0.042225395000990643968 -0.39982946789442042057 -0.23394088691615635978 -0.61358800699472582085 0.55920957146509686631 0.17193975181170542688 0.32658157258844261461 0.30610033293086524875 0.10517815781358025307 -0.60187254027402070644 0.32384355056276670215 -0.54869171171478270388 0.33210178830670800121 -0.040633777701725097564 0.4161703893445735658 -0.49604858950517194405 -0.49485845073142081807 -0.07722148167160165777 -0.1669581709675075909;-0.32808117171163814207 0.2404175334745697612 -0.16147075906899771569 -0.47813984822929084251 -0.060676948551556489364 -0.12851955459956124206 -0.33801749705112460465 -0.31664252269310455556 -0.41983939105623307997 -0.28450010683051107918 -0.52267006682466565781 0.55395271154154557269 0.51454270746881969334 0.56602132315821029884 -0.27321851540877278852 0.33346393212582364773 -0.0065134926051720627022 0.1152356846533676149 0.44834725625455434939 -0.33861283871963504533;0.44806409657001489144 -0.31045137440630427017 -0.30531689390897615022 -0.47587492955156557306 0.14707809091138901447 -0.18471923519934960178 0.47670410359708298431 0.12396531749921346766 -0.6037069476452741057 0.49734255220539452802 0.35408667798424137141 -0.42304558898987804083 0.38102854763729032683 0.45240140709072407255 -0.15226400347851357098 0.034965592702753359178 -0.59028139677839097654 -0.27341496926986119664 -0.21232227376893655912 -0.12669472392223737889;-0.36114842999792257094 -0.24553673856779725804 -0.63617035419570999721 -0.27576721922758007377 0.31768048964295642067 -0.47302622894308821166 0.56904840121226840655 0.36049255828915954813 -0.27955893665078102028 -0.46331225376647255931 -0.025813830333134765715 0.33254315341938794903 0.055548546378611229901 0.11297231099575806568 0.089340757442781720821 0.30482212096647193222 0.38851301536024446248 0.29327213095009391219 -0.3393832015659898893 0.58053482071888728999;-0.18333124381635348965 -0.41656120378306266128 -0.21826094358475109369 0.3169191970327507879 0.42061456848520939467 -0.2074501642774892185 0.4048219919351926932 -0.20344481494734911742 0.034941356656334306152 -0.059495727947281168424 -0.17684992853545083991 -0.42438380830943128741 -0.37549643353212680541 0.56312347779319382735 -0.41697324135164121062 0.72237849568129464117 0.27428669737311739407 0.51132532121897544819 0.18084997018743348418 -0.52322047279823657995;0.49067072064358097094 -0.099433390606961741254 0.27754341355038070205 -0.1575906300865392573 -0.26279908915694100147 -0.099773410705910531293 0.02774783943563326194 0.81513119699125846651 0.59244505298832850215 0.078295164530473665421 0.1541249593752524738 0.72420096798782140901 0.17674472258283982495 -0.35368151272700765197 -0.27017627258036119864 -0.31355124000615303137 -0.65907838986139688497 0.61159263167299904307 0.11674679639435350809 -0.20613408258054036204;0.46375103768826475559 -0.17657402323544074685 0.15854317812442514368 0.24288187397657653999 0.3523525549819321312 -0.52875710853833379765 -0.28491960297245699785 -0.57094610651117427835 0.36524842817545766227 0.25087389248273705977 -0.17117855325060932214 0.2932732529185778092 -0.069172137799296373739 -0.58354781512330478055 -0.37340003710964997374 -0.23084179000003882121 -0.52520777077197633442 -0.0004866060961753123932 -0.23645006845436489229 0.49025626650151615804;-0.24102180853207466615 0.0060322281815733810525 -0.043588667192929114735 -0.33652987148034985143 -0.0530713489832371349 -0.18932344394853531377 0.42707221062132733058 -0.42339228611042262207 -0.30947277411881146669 0.20357534402878052493 0.21191427368410917231 -0.12878432087644489656 0.75975860784236737278 -0.23827620500743817988 -0.62253552031552172874 0.02521112925620599271 -0.45084933981086400268 -0.57207323660125763976 0.5962379091970738676 -0.60674431027566300134;-0.25845500927754461173 -0.49346657566992058186 -0.11228746291388795597 -0.55411654867716308992 0.037632952195455350586 -0.57019162632225284248 -0.35773829844926025023 0.045732455754291016781 -0.31920944956869456988 -0.2364269770985349961 0.27434844924356061036 0.39337269774597877214 0.5434677678971423509 0.18494396538054930224 -0.29751377237485188143 0.43182144477785844305 -0.16087189500797083319 -0.41765082957867749602 0.67484455406095800178 0.2022142552858301745;0.24886119970226003306 -0.013438296370816693939 -0.14703262660211985358 -0.008610207494485098631 -0.047645892453284280355 0.25824825519247951444 0.63147182176761984529 -0.83361944494134343486 0.58155913244856349831 -0.37512504483910552588 0.62278372038445328762 -0.1086169522778039076 0.38917542550412204116 -0.26406724885808546821 0.65671291928862063347 0.71536943661056773269 -0.25214315460200503738 0.16971143228257817848 0.44598445005742559655 0.61865184754232771525;0.49917147557011126713 -0.35613795109702434116 0.065314318349838043631 -0.31204128695207600241 -0.65952019408299611403 -0.53189741993495520678 0.053410757712958063792 0.40729071946853867559 0.78169671603258295001 -0.7065105666272684104 -0.38293112582411081846 0.28537379536776419364 0.12329598138682686115 0.48170400080634512285 0.11657998840415143005 -0.096563514085308457813 -0.487498709133654895 0.41433345714983788044 -0.51612775074868610936 -0.31831761099479788379;0.60769010766213504837 -0.57011258674163800553 0.42563423175151937627 0.66266874519265062116 1.0837287395739698681 0.15775496460762039597 0.096001926574787149749 -0.077426028127082852093 0.38884896577895278202 -0.089635928960766275697 0.23040081211494464752 -0.35068994338245013109 -0.24121034128073476355 -0.09151879583346395064 -0.018651396347686172161 0.74395479730205205104 0.44058748908826989021 -0.18261611704933772282 -0.44374012464654677412 -0.41303932988149266725;0.079799118762203455346 -0.26040940037711890476 0.28298768870185053714 0.39531161541474213461 -0.42496013248057351586 0.40790728896333355857 -0.39169990121845454922 0.081262828808089118682 -0.34314548822019030894 0.23895197692094746755 0.48594766011130885452 -0.43471698264561259295 0.62400386541689822906 0.0020586235174410820459 -0.43866091744999946567 0.43274570651669819199 -0.22244500380691639707 -0.049260310838475568351 -0.54170051737977309436 0.19003451609825486313;-0.29111157653113012289 -0.52626359603943884125 0.07122512696344285299 -0.18502050763846372705 0.040738521094102718434 -0.40217820592157177417 -0.68644132439775951138 0.41119870356132770528 -0.39756229234946649509 -0.44059860519367066711 -0.63905870324912372737 0.091229881718586508521 -0.1269111907720865684 0.095018015347853368446 0.7845861231126336488 0.10160743380904221911 0.49289502453066352805 0.31855675520568016434 0.15171683143473771449 0.59529766882028789521];

% Layer 3
b3 = [-1.6343427508094838796;-1.4175704497775611923;1.2196607379520230108;-1.0875318464962961951;0.68922121458169438579;0.46450822635950050898;0.36563639520499513491;-0.27420520539705939278;-0.057800303777414151207;0.17843155270474911345;0.6002096548157717093;-0.79797845074435136414;0.93436372017252644628;-1.0545603127151830236;1.4731029053764423953;1.6345739941807284623];
LW3_2 = [0.12744008097376305355 0.39485407693802543339 -0.42548807067231353418 0.39273479522551529852 0.30218620261831230511 -0.48197924811959946823 0.38141391637166388584 -0.39497827339169727656 -0.58189768813890063726 0.42726703148036315749 0.085668627439830016823 -0.49274566182515050494 -0.40341927621516115998 0.46354311649637969239 0.024128980838194338115 -0.26135946419940431218 0.12138891302166922304 0.54764395386927944287;0.54757613159291673721 -0.44173766900889399611 -0.16231563804179188759 0.044951054215555195925 0.71471777686426307685 0.31612769235835525006 -0.62854377960724483465 0.19883445444375458244 -0.16158412138306649242 0.33063648275650631136 0.14152819960469417704 0.50661822602455963693 -0.40047527433405150088 -0.58533921957997503416 0.085739741580479186811 -0.67010089701477770774 0.100886916597110049 0.38148822101691098885;-0.39946781168469180923 -0.079957934285978929378 -0.27240365698379304105 -0.27001467411727664292 -0.38806488029440960874 0.36338995619205949339 -0.084330029247272772497 -0.44910932731784419802 0.42942196360737272531 0.66380786172578631898 0.37428561132077431406 0.58041165135231453931 0.3021989050929519971 -0.12461765560805886099 0.58440030596152392484 0.54936938202568919021 -0.033999851654600815598 -0.10461430208335728564;0.068177866851431540018 0.30510172735640267438 -0.1276865615822667388 0.053204265455080765324 0.033017275718396431328 -0.047656113484982921824 0.45021066744419657724 0.11005790589532185586 -0.3089272977903123607 -0.50737221086742456677 0.43990356893320220477 -0.0983503486272422206 -0.21159683679301236059 0.80784242320090382528 -0.1760740453787491 0.074272853856916606907 -0.83463327054142733008 -0.27374461729611798688;-0.16038205585574921708 0.58852909335940239988 0.097456272252916129051 -0.17045603465226402684 -0.41898290657834652562 -0.23249249624078507925 0.53288030517032514144 0.3366996182833916218 0.26174389416258436736 0.60863537088071106851 -0.13294484639758291644 0.68860108612484383084 0.45325491854317384588 -0.2364630459598459078 -0.58548547019785290857 0.14186021397749101758 0.057082163446227837666 -0.71512679484251295836;0.10505606047768413502 0.64159787898369757819 0.1785849775420929042 -0.91835050015002739343 0.65195916561460409699 0.46025168101916485996 -0.19914619927577759118 -0.72264882539296015906 -0.072370070988006934831 0.59109737961007602358 -0.16430612576510097989 -0.37437056011344216344 0.59093929330916394882 -0.039060639046079717596 0.32446282107031987341 -0.22824493536261525328 -0.15433155731929396048 0.26819823747851118112;-0.4632719001451561236 0.49251137073633488583 -0.010831872685755595739 0.70743381521746606655 -0.024257036505561685447 0.095145305642541658231 0.22312925474359993072 -0.33178535000789088905 0.72821931193018818451 -0.55683289349823006376 0.71035655846508649613 0.0069412913289229969532 0.31340446305818608908 0.67608143475930082555 -0.39434237726875920327 0.77844866314345284586 -0.49205812217025646227 0.086683166625437083064;0.2052227299931778659 0.25323751721835141559 0.17014996449639316345 0.29206489845963184981 0.57756527850914951561 0.46346373875534191411 0.56592151487555697464 -0.48355871347093243307 -0.046238867474893176335 0.031183263387585761356 0.00025191126595238842907 -0.049141336446128287829 0.3184858029779839006 0.54625116607029788884 -0.80877049757155983212 -0.61937836994402328816 -0.11813537042908038577 -0.44127479638884681279;-0.062031812859731576271 0.28455236750369949927 -1.047103751759420831 0.26011716407126356243 0.83516636639498353922 0.40092559240419578526 -0.62131771826748127818 -0.078205865531953425163 0.46697203409163107191 -0.062015224384982463313 0.31726704846819664407 -0.38065893250603144438 -0.28042684313326865508 0.21550177918833310353 1.1110018510167085637 0.72253368122710104338 -0.30079379127013206041 0.13958129223663456875;0.12052688028873388693 0.63899136441720227886 -0.38738785117277130254 -0.11168643836911830436 0.65026220076936747105 -0.34817645414663495051 -0.59761917032399347605 -0.06492410231399264875 -0.078638526011303486185 0.032370021154486817994 -0.38019282374180385364 0.37836671490920881222 0.15443799443381628356 -0.48389569874811966255 -0.55453711674633177076 0.65041833029667917021 -0.041926659611620009649 -0.35569063174850440445;0.6339676608715347772 -0.6120286640373127085 -0.70979725648193436882 -0.043980728590512802034 -0.032696982601321068762 0.12644297647065000367 -0.5305863564989486969 -0.42420691966516616001 -0.49596994134567445878 0.42750164912126153993 0.026643990485413968777 -0.63232738740257943277 0.55509092804674253774 -0.74685474564775966577 0.23424601898873273487 -0.9015074494500867619 0.33378820398438008299 0.53537356177749750863;-0.94966298027922357861 0.56713651344212312466 -0.13246175749070432381 -0.12822737590825988852 -0.66859446627362073556 -0.28873496730069947436 0.053886208819612452237 0.56458882547834476906 -0.24349140675814204271 -0.50789750443432557514 0.17011456762184914981 -0.032535489867165007238 0.07035072084470753162 0.25629589501152261199 -0.60558996199553116746 -0.046047849434446626316 0.27068727722573687755 -0.43337855734845415201;0.59648870196732373117 -0.08706992107973043904 0.42059723690455402823 -0.046907823040276568072 0.09329804234575415911 0.11891911422384103536 -0.37487979957408562592 0.27636568309709719227 0.12777071099705669677 0.46767838963461633162 0.59850151906995396889 -0.11867503315811978037 0.58893046861923570301 0.037893653486623192495 -0.32400237451598123961 -0.28876601483840474982 0.44059150754320486332 0.72039946263718834807;-0.044606233737355123481 -0.65105149487317337531 -0.31931033042410322809 0.2875505570361941432 -0.56224689401478011863 0.46211447251031778638 0.47130424635953260815 0.86745139754975375546 0.78656344140989287173 0.039250496871942597288 -0.29416425764809001064 -0.35400759546763416186 0.45112676310383315048 0.72697054892780788027 -0.51360936412492264047 0.65473933379832460755 -0.38323968230257188239 -0.42509595236190306222;0.35560976163804869365 0.33607626033299464741 0.43779936406198649568 0.10878475069548888821 -0.51799729753540235677 0.40796738757904721373 -0.5780652287355041441 -0.064500851740305703563 -0.28226949723211958165 -0.30890284110522797656 0.087787873516818396014 0.62128524259025408316 0.033849807712196242071 0.55083249139921253157 0.092373044959054337322 -0.31956892835719696855 -0.41203023599513477482 0.29740339645247715339;0.37052392696905711578 -0.48712150464054038146 0.32115439110606752715 0.64661395473031557657 -0.23437277426264324642 -0.52130694733285509734 0.16612308871616790484 0.56455644318056341646 -0.19173229361983876173 -0.049493650092389117334 0.039324900506796031663 0.75200264273568551143 0.18442745884166114601 0.1965842658487032546 -0.60118636188333041126 0.076771531070405588104 -0.036845001784608026607 0.14238997721984081313];

% Layer 4
b4 = [-0.49589305281811602022;0.090077354862136652103;1.3342749753562650472;-1.2321735032910072771;-0.60878647731713442237;-1.3122579283435413799];
LW4_3 = [0.067127740155315779313 -0.49882167331988802594 0.32184485384005045994 -0.59053795759254235076 -0.99461093850806314709 0.59380421233612046272 0.71472439697915879364 -0.89813543833323128407 -0.12708334954479846846 -0.5052049638066722359 0.81772622845221565324 -0.98875305821057990485 0.82683729646668324698 0.98552017492614596428 -0.21468605231274703882 -0.9373652245797901017;0.37241135372520556279 -0.62682293384194931463 0.69226093138042699149 0.13089644250351328836 0.3051348012932783571 0.75570587643034548009 -0.03289410258092254763 -0.39584911774612274726 1.0242195125715800597 0.32404671936283235834 -1.3018060249276908191 0.65398768047434951978 -0.15742874286698868569 -0.017165199801182612349 0.40798811541755225507 0.0016613901173837958281;-0.004112838122337545213 0.31565588129327332156 -0.39642187540569456816 0.059844812290661728027 1.0418186938410605169 -0.85190906148436262857 -0.13074827811038952641 0.75497105293178856655 1.6519024731428373354 0.3047128933677614171 -0.87720945503798786191 -0.10293666885832469804 -0.21701885690102795667 0.11664676247580975377 0.081251065267010577631 -0.47707579605026823044;-0.48631321258706994293 -0.45973416428873775663 0.29189939150517657529 1.0135507324295336407 0.15494099975598293883 -0.72261405191214067578 0.68934555415722797989 0.62318386087332766632 -0.73871369072957215884 1.0217584191025386176 -0.87499082754736490219 1.2167478512147356096 0.74218787614614167847 -0.77121360893902912714 0.09599146988620832488 0.34464668547090016038;0.47066863400106528914 0.18357745336534075919 0.26479550153704417559 -0.29296002022285921873 0.019160177941970724103 0.019622776566807897253 0.77823845484765397096 0.7688913588360254403 -0.752573187287646439 0.37172881197465046377 -1.116761015850413985 0.11499659491105192199 -0.43660177552645523802 1.111764918121578738 0.54738953758751718315 -0.032074296009644336081;-0.61516502713614296116 0.46001875775032041727 0.049565212003469708013 -0.43163467814483930107 0.40612739042396689415 1.093083373096067179 -1.7516116617969079705 -0.16688090132987978831 -0.7879980555729574343 0.031584884233655269314 1.0863369066690826692 0.48989844139511867782 -0.65901215040897698216 -1.7868487219885131889 0.33390926216769639678 0.30646197127543467476];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = softmax_apply(repmat(b4,1,Q) + LW4_3*a3);

% Output 1
y1 = a4;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
  if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
  else
    a = iSoftmaxApplyCPU(n);
  end
end
function a = iSoftmaxApplyCPU(n)
  nmax = max(n,[],1);
  n = bsxfun(@minus,n,nmax);
  numerator = exp(n);
  denominator = sum(numerator,1); 
  denominator(denominator == 0) = 1;
  a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
  nmax = max(n,[],1);
  numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
  denominator = sum(numerator,1);
  a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
  numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
  if (denominator == 0)
    a = numerator;
  else
    a = numerator ./ denominator;
  end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end
