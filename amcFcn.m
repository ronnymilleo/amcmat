function [y1] = amcFcn(x1)
%AMCFCN neural network simulation function.
%
% Auto-generated by MATLAB, 01-Nov-2019 23:32:19.
% 
% [y1] = amcFcn(x1) takes these arguments:
%   x = 10xQ matrix, input #1
% and returns:
%   y = 6xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [1076.12313601419;1076.12313601419;0.00128119181944954;0.00211023475295609;2.27591329880395;0.116738320822445;0.0149815577803477;0.0735941320453423;0.122401041642466;-0.653462670250176];
x1_step1.gain = [0.000139513268796526;0.000139513268796526;109.160033584765;71.0776997795597;0.746781941417561;0.00752160806236635;3.30859880628407;4.82679772341448;3.00861661098396;1.07956055371207];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.9111630379893156384;1.4650868217541577199;3.4062816004199025777;-1.0164155788666375813;1.3570418923232170361;0.74157514573428406912;0.68938605817660836284;-5.4142348004030909081;0.37649493843258613479;-1.3555105067216919323;-2.1774141332028174034;1.9841662282843826048;-2.0102524655049092139;-0.74063684657027339941;-1.4167691373756283735;2.3761622074961663564;-2.7297636059761010152;-2.6518325851190081011];
IW1_1 = [-0.41169361118721370385 -0.28057235474596903257 0.60319880273823356376 -0.18301919826769369459 -0.9633193654999099298 -0.82223280815018884304 0.0073211397003463477007 -0.46329209413001576356 -0.38480540655827666363 0.95268894904064138629;-0.5518613943207891781 -1.2455833065294068529 0.90477417990464836794 1.0010110682971258278 -0.090477005061280924014 -0.42771834372689215842 -0.32675153150943420099 0.82015250826681052043 -0.81725685720831309222 0.61563671053719182247;-0.65152453299333135117 0.22657319362705533039 0.82271590384454651446 -2.4900139261837384019 0.16947163741858689567 1.2635670495041115835 -2.5801477621346702307 -0.326840031625873495 -1.7406045189522134642 -1.1077423546915856623;0.24088997960232336193 -0.30349770010146237542 -0.38114501379713700002 -0.08517704324006244998 0.60461873702238222439 -0.07059110333981269414 1.276441875641881385 0.61611193511160200487 1.3654148965637824542 0.81445857691279122115;0.50989589906559018573 1.7282912559296172983 0.4742995062194267919 -1.1868688466227492739 0.89055527628626640624 -0.2558673746316124098 0.19585837149572976612 0.97091262495953378764 -0.016229160205688829971 2.0507402243467889313;-0.98168377396762218634 -0.78782970123006124119 0.12686667523954409109 0.8835746259122562174 -1.4049981336058516845 2.4259585182851153284 0.22383840850439723491 0.65316159196121248431 0.40585928443998259274 1.2425070349130333813;-2.7889987621963783226 -1.6525618052118558055 -1.2682669616899560072 -0.71305308813325518624 -0.72071303762958593975 2.321737979941473462 -0.93381092504104623586 -0.41115181819971974297 0.59465102596530861057 0.49900677494419309888;1.7517527809175528208 1.8881410160446476798 3.6419572468033694079 0.50651061879525816067 -0.27525274217156070478 -0.69211838535666614369 3.2117602641242730677 1.5525195366534814134 1.3298470834164390908 1.7858504958323024869;0.45609741629474154223 -1.1144714114659908244 -0.10453163198885684348 -0.25046562896967033973 2.2661225360796892758 0.11666627555669023542 -0.32789568835728882812 1.0426841848902543841 -0.80557645328117799544 -0.081965131055324116915;0.57985922397813016715 1.1767259362852933169 -2.6069880009020680589 2.9279497351121799298 -0.39418998604181026968 0.063857432562007293564 2.4628231590030238429 1.9222433427707392717 1.4214276577592168671 1.4886352355598637676;0.50079864897157178039 1.6448256843217430312 2.8479520206987105624 1.0994600915819581211 0.3475793720693058364 -0.32691693022150092318 -1.4370870217951257075 -0.60473994474244630037 -1.9428737158878037761 -1.4163383555585142837;-3.1038572908580346343 -2.8966188130851908689 -1.166415716944123826 -2.4798949378954877609 -2.5280952221205224006 1.1048742358681225006 -0.67348511556947066037 0.033405727614862365527 0.089969710581530179527 0.15238826576087921572;-0.21445961448017861195 -0.82927515200329138256 -2.3048363556436295418 6.2069423731860231541 0.29969178550402642003 -0.07287216646619210092 -1.9654364586934816028 -0.10432876106998509314 -1.7969613414351961467 -1.0361238896162081602;-0.68014172021139474023 0.30161588349176360335 -0.58931458498504019072 -1.4011780824550397195 0.94330850311585079382 -3.0029646849180138268 -0.026371178539770345067 -0.20193290261756047244 -0.51864003622087562206 1.4229777924385194066;-1.3174912027820753213 -1.1338523245760263602 -0.27788155026530653169 3.6241066836099884441 -0.065469204483081536172 1.1308945802490510957 2.6327278150377342314 1.3210491488611357802 3.1700664792972617079 2.3318761409344190838;1.0877408041825713525 0.84511408789007724796 0.37457491614473747976 0.18247799395162647706 0.54167952405725960929 1.369293632583495679 -2.1206811408566852428 1.1398778052218452306 -1.9046354810046846051 -0.679321877639515459;-2.760362538476961447 -2.8117455453945439103 -1.7549388713515257088 -0.051619033465462600685 -0.61941592923164379147 0.66253951158349144723 -0.063534683743945719048 1.0186399269887971286 0.29829060049795624865 0.30983698956815863834;-2.7995491052085870187 -3.4911837726727430464 -0.79093303848238794007 1.0471414680601442981 -0.95660395174287859987 -2.6326083059187630475 1.5255505575124339579 1.1459862597206085244 0.24923509093226281497 0.62434146510915966566];

% Layer 2
b2 = [-1.8658538393449521919;1.2365673761823217092;1.8779299434402993985;-0.48369136574362148195;-0.14058655470618475203;0.71302619542924228213;0.39257872686261513495;-0.80381150067477713517;-1.6822667200837475576;-1.4787005451939134737;1.4964668845713195999;-1.6332972109085244217];
LW2_1 = [-0.037477504979693709863 -0.69704524747283391761 -0.75776014617762532666 -0.21873497962756038859 -0.57966686367499009602 0.28181172066024756662 -0.066997882452276155685 -1.0160518850005508806 0.11179643852160675577 2.2420508680924582379 -0.89918011720443258294 -0.26158800705230850214 -0.1446767469402731876 0.51851535026605244383 3.9126089875867964274 -0.3172279157003770611 -2.2823512511598864627 -1.0741692494769732313;-0.10687249833750782357 0.070695158626859641582 -0.86041602468585132168 -0.82500197830053345616 -0.67353026700446405606 0.46056402740178897792 0.8443803492217307749 -1.1152179625591887024 -0.25873724918802781803 1.770694675769783899 -0.19859729231349335099 0.55611900174365269667 3.1084440953384162576 0.36150175979601256726 -0.98263063629151226053 0.83197107612022225265 0.10913005625062977 -0.25813632863608954038;0.20061172081562311797 0.35248411828822812097 -1.7805452342561043366 -0.47069505237009445775 1.2515921485609440289 1.2599770309723226092 0.60679700480973042254 0.39207496122355134371 -2.4319802018053047199 0.5278495753323606543 0.59545096253659579588 -2.4662787956692535651 -1.516060413224513681 -0.55021246311095051151 -0.074736517474028887897 -0.54877675548535576056 0.13230167576644863425 0.76781874174819086942;0.3143918303757737287 -0.48303574858568321115 0.43783245978667650888 0.28823531030614102377 -0.34609375103799211448 0.72516968974675755089 0.17405260369198793935 2.7290045718098112637 -0.27555846218512630719 -0.94398620155486834271 1.0987674414494661423 -2.1031863698296242582 0.59258512181049283196 -0.8599593944099357401 -2.6840694150511801297 0.33703614668314085812 -0.14740571733577026436 -1.266941567082893183;0.68757009608921393351 0.31893562425591714948 0.17166465479396247895 0.061275111719705635527 0.11938356695796920048 0.86368283495610231881 -0.97340603799932989837 2.2638811902484623495 0.69878250666100505395 1.2998362678679344917 0.67344274575488549672 0.86128149813854248951 1.4901264441475756684 0.49757687021656071824 -0.86338225908050669766 2.0768086837373083142 0.54586044399657696058 0.45768165599635579621;1.3730354913032334352 1.1242922282295404468 -0.90578749828595406246 -0.12294450001135706629 -0.77652469132522872197 0.59912733314867738788 -0.4718003103056727654 -2.5657113097556654147 0.038100149539832393886 2.9297019675987057141 -2.2153109481777573109 0.59344171915880772339 3.8593054831967368301 -1.0490459489002570415 0.49510134742653816309 0.41333176032547258583 0.71263636852322154169 -2.1971609859025780231;0.42608539124042643653 1.1793882064738947513 -0.69300177715534239109 0.12599479883861455787 -0.32544992218396423533 -0.25077907228199791678 2.5972339402006294762 0.80243688285192515952 -1.3792577102913401443 0.37718228031993994431 0.59681014748479965792 0.19103240764083029291 1.0856632403492165739 -0.5899360512525551048 0.14705688769519684178 2.3496005040609233561 -0.25805880199974834399 -1.9843925600759715344;-0.68209034183040839761 -0.75458181080219832726 -0.70868077661943096324 -0.091536932177635629837 -0.55090736233834203261 0.10145508314007219142 -0.19589001888653453931 0.3399749348041925523 0.42135127813458933543 -0.049953785601917252701 -0.63649349074792516134 -0.47842646198720484296 0.17412861112659874796 0.052331711168254128885 -0.65771489474236899397 -0.89722486917800137185 0.41778952076466335797 -0.16956006179818439161;-1.3324940097009903006 0.20538838199205577961 -0.29085106526270110283 1.2175490897631511267 -0.27778776970589302842 -1.4367336025263772736 -0.46029141355416736126 -2.1551141878051263134 1.392315097735809637 0.61088889640648991186 -2.6909112926223057727 0.78657345283726742835 0.32255817080474813441 1.1250422755519402518 -1.4795391122954706375 1.7601287164735313073 -2.2447700231596536824 1.5343380682145177918;-0.79396289772725892053 -0.29186551266361482337 3.1956387014651310707 -0.12262349889134951941 -1.997929832757371571 3.1338878523003388388 0.027404082765552870843 -3.1870446833273011755 1.0126675575035539723 -1.1771672124264280779 -0.037370427984349238737 -2.4015452192884887417 2.0145446578599761622 -3.2391353184380751173 2.8731561085237760089 -0.30971188564574869684 2.3836780985679899558 -3.5420241509028569382;0.79500486725229291274 0.54005829339606270523 -0.42353423974199105873 -0.73896442137761342295 -0.28551594796081924965 0.64130439629563107395 -0.077103398638472583904 0.022434074220353431711 0.23954368666864805926 -0.52867568801337594397 -0.4660542217164326817 0.24019941774576766824 0.16453875602147907675 0.24325287826516814316 0.14930052999286397286 0.050179230617463078945 -0.32623209944321052145 -0.51395076509532000575;-0.55469546751340181867 -0.091831703070519993259 -0.99839958417036112071 0.74986406266049476788 0.26208058473692646961 0.38220334183243087622 -0.36961225697026572901 -0.2627028259845915481 -0.45609561315708024853 0.70606535790515334572 -0.058268834556028908933 -0.27746928726799796605 -0.65685971775953189145 -0.33604970291090352497 -0.041623702953943055027 -1.1137145136605481888 0.39738919087341556535 0.2011373001225906787];

% Layer 3
b3 = [1.1930866824811812155;-1.1059945967777906617;1.1608406331291811764;-0.23515448952981654607;0.35204886608661883907;-2.9564779210896436901];
LW3_2 = [-2.7957628332393982262 -1.2921258419972485587 -2.028340955278371549 -3.6940437205001006582 3.3850592295452477387 1.0834227200299404448 0.0019656424350476572709 1.2005681171694038145 0.15147657230693081787 -0.71704726635259352641 -1.2161979606614683469 1.397371257153737778;-0.48737044695423759055 -0.44246081839676176806 -0.85711969139493549008 0.36637215458947630653 -0.88864558013667771519 0.29533306195724923215 0.60486444452044418885 0.62428736956927655122 0.88926549040628177778 0.89512876120078166409 -0.072109404215728728493 0.28901920960742755184;-0.88785252404514369839 1.3969281697582620616 -2.3045017141508234992 3.6968972051397095413 1.6385037276648621862 -0.40148307376660530288 -1.1110891749841587117 -1.3575878938066443524 -1.1246274430482914308 0.75328759230963771021 0.9871063549309294638 -1.0854367073481685502;1.884982665087201914 2.9207818313073965477 -0.31121723799782069486 -6.3062988373852206792 -2.2623790300636632544 7.1061717054430477702 0.36498634651637079651 -0.52285501463049244286 0.33479965099619740654 3.3672295638178657562 -1.2439817714708887308 -1.7334743147300266664;-0.056087544803107750035 1.4191274714115642563 -0.48297175306942236039 -2.1709352745545436036 0.040203217709967896398 1.4768243875691353661 0.74997090689092682503 0.36407887273893962954 1.3342813046038310976 0.96998962288302137402 -1.1177220434990482456 -0.64357905535742787606;-2.6822919998530334595 -0.72934759795861414666 2.4587850833479198975 -0.78319446740225340253 0.2360891163016724803 3.764862365978834724 4.3426683801824710329 1.2802675259720734946 3.6081400735545154923 -3.9091157341885018894 -1.8336808739083321207 0.84594948144075798879];

% Layer 4
b4 = [2.0052343951583972981;0.042844329613265910717;-0.49811178339679479388;-1.2895450167813680142;-0.091437819225139382873;1.4114199629038688411];
LW4_3 = [-4.0392713726125739626 -2.194675685123503861 4.3155779856979634701 1.0000182028335464768 6.4136690472246780104 -4.0473057679029400546;3.696637677542178313 0.39581679660295354672 1.7990383442689785731 7.7226565509985887203 -0.63472483971028215155 5.8385892165092130313;-2.5259540490191225715 -0.2882638560437210673 -4.4977698512379857831 7.3298396932421292505 -1.0911081644132203383 5.7796360963597983584;-1.4073237158559870341 1.8458099849327387343 1.3549097741907616399 -10.517463127097597564 -1.9133603246804427034 -8.0925905258018460131;-2.0553428344516393445 -0.11494289282901500038 2.3526404007881667191 -4.6555911865956653983 -0.27178705535971087182 3.4743519645177003419;4.7077049673438500221 -1.1765580645000621729 -4.8843605947875081696 -1.5083385337739851906 -2.9387926444980809748 -1.315814389574480936];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = softmax_apply(repmat(b4,1,Q) + LW4_3*a3);

% Output 1
y1 = a4;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
  if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
  else
    a = iSoftmaxApplyCPU(n);
  end
end
function a = iSoftmaxApplyCPU(n)
  nmax = max(n,[],1);
  n = bsxfun(@minus,n,nmax);
  numerator = exp(n);
  denominator = sum(numerator,1); 
  denominator(denominator == 0) = 1;
  a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
  nmax = max(n,[],1);
  numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
  denominator = sum(numerator,1);
  a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
  numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
  if (denominator == 0)
    a = numerator;
  else
    a = numerator ./ denominator;
  end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end
